<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
    <script>
        //1. list.html?pageno=?? 에서 pageno를 추출(location.search)
        //2. 만약 없다면 pageno 에 1을 주자
        //3. pageno와 pagesize(10)로 api서버에 요청을 보내자 
        //4. 응답의 contacts를 가지고 #list에 번호,이름,주소,연락처 출력
        //5. 이름에 read.html로 가는 링크를 건다
        //6. pageno, pagesize, totalcount 로 prev, start, end, next 를 계산 
        //7. 계산한 정보로 pagination을 출력
        //8. pagination을 가운데 정렬

        function getPageno(){
        
        const str = location.search.substr(8);
        const pageno =parseInt(str);
        return (pageno ==='')? 1 :pageno;

        }
        async function getResponse  (pageno, pagesize=10) {
        const url = 'http://sample.bmaster.kro.kr/contacts';
        const params = {pageno, pagesize};
        return await $.ajax({url:url, data: params, method: 'get'});

        }
        function printContacts() {
            const $list = $('#list')
            contacts.forEach(c=>{
                const $tr = $('<tr>').appendTo($list);
                    $('<td>').text(c.no).appendTo($tr);

                    $('<td>').text(c.name).appendTo($tr);
                    //<td>
                        const $td = $('<td>').text(c.name).appendTo($list)
                    $('<td>').text(c.address).appendTo($tr);
                    $('<td>').text(c.tel).appendTo($tr);

            })
        }

        function getPagination() {


        }
        function printPagination(){

            
        }
        $(document).ready(async()=>{
            const pageno = getPageno();   //1,2
            const response = getResponse(pageno);
            printContacts(response.contacts);      //4,5
            $.ajax({
            url:url,
            data:params,
            method:'get',
            processData: true
            })
            const pagination = getPagination(response);
            printPagination(pagination);

        })
    </script>
    <div id="page">
        <table id="table table-hover">
            <thead>
                <tr><th>번호</th><th>이름</th><th>주소</th><th>연락처</th></tr>
            </thead>
            <tbody  id="list"></tbody>
        </table>
        <div id="pagination">
            <ul class="pagination">

            </ul>
        </div>
    </div>
</body>
</html>