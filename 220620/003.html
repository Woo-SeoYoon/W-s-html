
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script
    src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>
<body>
    <script>
    let 위도, 경도;
    const key = '4e96bbe63437be4054581d930fdd2021';
    async function getPosition() {
    const city = 'Incheon';
    const url = `http://api.openweathermap.org/geo/1.0/direct?q=${city}&limit=5&appid=${key}`

        const result = await $.ajax(url);

         위도 = result[0].lat;
         경도 = result[0].lon;
    
} 
function getFormatDate(){
    return `${date.getMonth()}월${date.getDate()}일`;
}

function getFormatTime(){
    return `${date.getHours()}:${date.getMinutes()}`;
}

async function getWeather(){
    const url = `http://api.openweathermap.org/data/2.5/onecall?lat=${위도}&lon=${경도}&include=hourly,daily&appid=${key}`;
    const result = await $.ajax(url);
    const 일출 = new Date(result.current.sunrise*1000);
    const 일몰 = new Date(result.current.sunset*1000);
    const 온도 =result.current.temp;
    const 습도=result.current.humidity;
    //온도, 습도 출력 
}


//ES6: 구조분해할당 : 이르과 값을 가진 변수가 똑같은 경우 한번만 적자. 
/* 날씨 = {
    '일출':일출,
    '일몰':일몰,
    '온도':온도,
    '습도':습도
}*/
 

$(document).ready(async function(){
   await getPosition();


    console.log(result.current.sunrise);
    const sunrise = new Date(result.current.sunrise*1000); 
    console.log(sunrise.getFullYear());
    console.log(sunrise.getMonth()+1);  //월은 0부터 시작 
    console.log(sunrise.getDate());    
    console.log(sunrise.getDay());   //요일
    console.log(sunrise.getHours());
    console.log(sunrise.getMinutes());

    const date = new Date();
    console.log(sunrise);
    console.log(result);


   
})
    </script>
</body>
</html>